# çŸ¥ä¹çƒ­æ¦œæ•°æ®é‡‡é›†ä¸å­˜å‚¨ç³»ç»Ÿ

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªé’ˆå¯¹çŸ¥ä¹çƒ­æ¦œçš„å¤šæºæ•°æ®é‡‡é›†ä¸å­˜å‚¨ç³»ç»Ÿï¼Œæ—¨åœ¨è‡ªåŠ¨åŒ–é‡‡é›†çŸ¥ä¹çƒ­æ¦œä¿¡æ¯ï¼Œå¹¶è¿›è¡Œç»“æ„åŒ–å­˜å‚¨ä¸åˆ†æå±•ç¤ºã€‚ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œå…·å¤‡è‰¯å¥½çš„å¯é…ç½®æ€§å’Œå¯æ‰©å±•æ€§ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” **å¤šç»´åº¦æ•°æ®é‡‡é›†**ï¼šæŠ“å–çŸ¥ä¹çƒ­æ¦œçš„æ ‡é¢˜ã€çƒ­åº¦å€¼ã€æ’åã€åˆ†ç±»ã€é“¾æ¥ç­‰ä¿¡æ¯
- ğŸ›¡ï¸ **åçˆ¬è™«åº”å¯¹**ï¼šå®ç°è¯·æ±‚å¤´ä¼ªè£…ã€è®¿é—®é¢‘ç‡æ§åˆ¶ã€ä»£ç†æ± ç­‰æœºåˆ¶
- ğŸ’¾ **ç»“æ„åŒ–å­˜å‚¨**ï¼šæ”¯æŒå¤šç§å­˜å‚¨æ–¹å¼ï¼ˆMySQL/MongoDB/JSONï¼‰
- ğŸ“Š **æ•°æ®åˆ†æå±•ç¤º**ï¼šæä¾›æ•°æ®ç»Ÿè®¡åˆ†æå’Œå¯è§†åŒ–å±•ç¤ºåŠŸèƒ½
- âš™ï¸ **æ¨¡å—åŒ–è®¾è®¡**ï¼šé‡‡ç”¨é…ç½®æ–‡ä»¶é©±åŠ¨ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤
- ğŸ”„ **å®šæ—¶ä»»åŠ¡**ï¼šæ”¯æŒå®šæ—¶è‡ªåŠ¨é‡‡é›†ï¼Œè·Ÿè¸ªçƒ­æ¦œå˜åŒ–è¶‹åŠ¿

## æŠ€æœ¯æ ˆ

- **ç¼–ç¨‹è¯­è¨€**: Python 3.8+
- **çˆ¬è™«æ¡†æ¶**: Scrapy / BeautifulSoup + Requests
- **æ•°æ®å­˜å‚¨**: MySQL / MongoDB / Redis
- **ä»»åŠ¡è°ƒåº¦**: APScheduler / Celery
- **æ•°æ®åˆ†æ**: Pandas / NumPy
- **å¯è§†åŒ–**: Matplotlib / Plotly / ECharts
- **Webæ¡†æ¶**: Flask / FastAPI (å¯é€‰)

## é¡¹ç›®ç»“æ„

```
zhihu-hot-crawler/
â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ requirements.txt          # ä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ config/                   # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ config.yaml          # ä¸»é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ database.yaml        # æ•°æ®åº“é…ç½®
â”‚   â””â”€â”€ crawler.yaml         # çˆ¬è™«é…ç½®
â”œâ”€â”€ src/                     # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ crawler/            # çˆ¬è™«æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ spider.py       # çˆ¬è™«ä¸»ç±»
â”‚   â”‚   â”œâ”€â”€ parser.py       # æ•°æ®è§£æå™¨
â”‚   â”‚   â””â”€â”€ middleware.py   # ä¸­é—´ä»¶ï¼ˆåçˆ¬è™«ï¼‰
â”‚   â”œâ”€â”€ storage/            # å­˜å‚¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ mysql_storage.py
â”‚   â”‚   â”œâ”€â”€ mongo_storage.py
â”‚   â”‚   â””â”€â”€ models.py       # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ analysis/           # åˆ†ææ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ statistics.py   # ç»Ÿè®¡åˆ†æ
â”‚   â”‚   â””â”€â”€ visualize.py    # æ•°æ®å¯è§†åŒ–
â”‚   â”œâ”€â”€ scheduler/          # è°ƒåº¦æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ tasks.py        # å®šæ—¶ä»»åŠ¡
â”‚   â””â”€â”€ utils/              # å·¥å…·æ¨¡å—
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ logger.py       # æ—¥å¿—å·¥å…·
â”‚       â””â”€â”€ proxy_pool.py   # ä»£ç†æ± 
â”œâ”€â”€ data/                    # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ raw/                # åŸå§‹æ•°æ®
â”‚   â”œâ”€â”€ processed/          # å¤„ç†åæ•°æ®
â”‚   â””â”€â”€ exports/            # å¯¼å‡ºæ•°æ®
â”œâ”€â”€ logs/                    # æ—¥å¿—ç›®å½•
â”œâ”€â”€ tests/                   # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ test_crawler.py
â”‚   â”œâ”€â”€ test_storage.py
â”‚   â””â”€â”€ test_analysis.py
â”œâ”€â”€ docs/                    # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ API.md              # APIæ–‡æ¡£
â”‚   â””â”€â”€ deployment.md       # éƒ¨ç½²æ–‡æ¡£
â””â”€â”€ scripts/                 # è„šæœ¬ç›®å½•
    â”œâ”€â”€ setup.sh            # ç¯å¢ƒé…ç½®è„šæœ¬
    â””â”€â”€ run.sh              # è¿è¡Œè„šæœ¬
```

## æ•°æ®ç»“æ„

### çƒ­æ¦œæ•°æ®æ¨¡å‹

json

```json
{
    "rank": 1,                    // æ’å
    "title": "çƒ­æ¦œæ ‡é¢˜",          // æ ‡é¢˜
    "heat_value": "2223ä¸‡çƒ­åº¦",   // çƒ­åº¦å€¼
    "category": "æ—¶äº‹",           // åˆ†ç±»
    "url": "https://...",        // é“¾æ¥
    "question_id": "123456",      // é—®é¢˜ID
    "answer_count": 541,          // å›ç­”æ•°
    "view_count": 180000,         // æµè§ˆæ•°
    "excerpt": "é—®é¢˜æè¿°...",     // æ‘˜è¦
    "created_time": "2024-01-01", // åˆ›å»ºæ—¶é—´
    "crawl_time": "2024-01-01"    // é‡‡é›†æ—¶é—´
}
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- MySQL 5.7+ æˆ– MongoDB 4.0+ (å¯é€‰)
- Redis 5.0+ (å¯é€‰ï¼Œç”¨äºä»£ç†æ± )

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**

bash

```bash
git clone https://github.com/yourusername/zhihu-hot-crawler.git
cd zhihu-hot-crawler
```

1. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**

bash

```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate  # Windows
```

1. **å®‰è£…ä¾èµ–**

bash

```bash
pip install -r requirements.txt
```

1. **é…ç½®æ•°æ®åº“**

bash

```bash
# ä¿®æ”¹ config/database.yaml ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯
# è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
python scripts/init_db.py
```

1. **è¿è¡Œçˆ¬è™«**

bash

```bash
# å•æ¬¡è¿è¡Œ
python src/main.py

# å®šæ—¶è¿è¡Œ
python src/scheduler/run_scheduler.py
```

## ä½¿ç”¨æŒ‡å—

### åŸºç¡€ä½¿ç”¨

python

```python
from src.crawler import ZhihuHotCrawler
from src.storage import MySQLStorage

# åˆå§‹åŒ–çˆ¬è™«å’Œå­˜å‚¨
crawler = ZhihuHotCrawler()
storage = MySQLStorage()

# æ‰§è¡Œçˆ¬å–
data = crawler.crawl()

# å­˜å‚¨æ•°æ®
storage.save_batch(data)
```

### é…ç½®è¯´æ˜

`config/crawler.yaml` ç¤ºä¾‹ï¼š

yaml

```yaml
crawler:
  target_url: "https://www.zhihu.com/hot"
  user_agent: "Mozilla/5.0..."
  timeout: 30
  retry_times: 3
  delay_range: [1, 3]  # è¯·æ±‚å»¶è¿ŸèŒƒå›´ï¼ˆç§’ï¼‰
  
proxy:
  enabled: false
  pool_size: 10
  
storage:
  type: "mysql"  # mysql/mongodb/json
  batch_size: 100
```

### æ•°æ®åˆ†æç¤ºä¾‹

python

```python
from src.analysis import HotAnalyzer

analyzer = HotAnalyzer()

# è·å–çƒ­åº¦è¶‹åŠ¿
trends = analyzer.get_heat_trends(days=7)

# ç”ŸæˆæŠ¥å‘Š
analyzer.generate_report(output="data/exports/weekly_report.html")
```

## åçˆ¬è™«ç­–ç•¥

1. **è¯·æ±‚å¤´ä¼ªè£…**ï¼šéšæœºUser-Agentã€Refererç­‰
2. **è®¿é—®é¢‘ç‡æ§åˆ¶**ï¼šéšæœºå»¶è¿Ÿã€é™åˆ¶å¹¶å‘
3. **ä»£ç†æ± **ï¼šæ”¯æŒä»£ç†IPè½®æ¢
4. **Cookieç®¡ç†**ï¼šæ¨¡æ‹Ÿç™»å½•çŠ¶æ€ç»´æŠ¤
5. **éªŒè¯ç å¤„ç†**ï¼šé›†æˆéªŒè¯ç è¯†åˆ«æœåŠ¡

## æ‰©å±•åŠŸèƒ½

-  æ”¯æŒæ›´å¤šçƒ­æ¦œç±»å‹ï¼ˆç§‘æŠ€çƒ­æ¦œã€è§†é¢‘çƒ­æ¦œç­‰ï¼‰
-  å®æ—¶æ¨é€åŠŸèƒ½ï¼ˆé‚®ä»¶/å¾®ä¿¡é€šçŸ¥ï¼‰
-  Webç®¡ç†ç•Œé¢
-  APIæ¥å£æœåŠ¡
-  æƒ…æ„Ÿåˆ†æåŠŸèƒ½
-  å¤šå¹³å°å¯¹æ¯”åˆ†æ

## æ³¨æ„äº‹é¡¹

1. **åˆè§„æ€§**ï¼šè¯·éµå®ˆçŸ¥ä¹çš„robots.txtåè®®å’ŒæœåŠ¡æ¡æ¬¾
2. **é¢‘ç‡é™åˆ¶**ï¼šé¿å…è¿‡äºé¢‘ç¹çš„è¯·æ±‚ï¼Œå»ºè®®é—´éš”3-5ç§’
3. **æ•°æ®ä½¿ç”¨**ï¼šä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œä¸å¾—ç”¨äºå•†ä¸šç”¨é€”
4. **éšç§ä¿æŠ¤**ï¼šä¸é‡‡é›†ç”¨æˆ·ä¸ªäººéšç§ä¿¡æ¯